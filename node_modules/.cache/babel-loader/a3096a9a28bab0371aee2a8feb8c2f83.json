{"ast":null,"code":"var _jsxFileName = \"/home/fabian/Documents/d3Js/networks/network-react/chart-d3js-react/src/drawGrapho2.js\";\nimport React, { useEffect } from 'react';\nimport * as d3 from 'd3';\nconst width = 600; //Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n\nconst height = 500; //Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\nconst DrawGrapho2 = props => {\n  useEffect(() => {\n    d3.select('.drawGrapho2 > *').remove();\n    draw(props);\n  }, [props]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"drawGrapho2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 10\n    }\n  });\n};\n\nconst draw = props => {\n  function getNeighbors(node) {\n    return links.reduce(function (neighbors, link) {\n      if (link.target.id === node.id) {\n        neighbors.push(link.source.id);\n      } else if (link.source.id === node.id) {\n        neighbors.push(link.target.id);\n      }\n\n      return neighbors;\n    }, [node.id]);\n  }\n\n  function isNeighborLink(node, link) {\n    return link.target.id === node.id || link.source.id === node.id;\n  }\n\n  function getNodeColor(node, neighbors) {\n    if (Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1) {\n      return node.level === 1 ? 'blue' : 'green';\n    }\n\n    return node.level === 1 ? 'red' : 'gray';\n  }\n\n  function getLinkColor(node, link) {\n    return isNeighborLink(node, link) ? 'green' : '#E5E5E5';\n  }\n\n  function getTextColor(node, neighbors) {\n    return Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1 ? 'green' : 'black';\n  }\n\n  var svg = d3.select(\".drawGrapho2\").append(\"svg\").attr(\"width\", width).attr(\"height\", height); // simulation setup with all forces\n\n  d3.json(\"https://raw.githubusercontent.com/cFabianR/Prubas/master/miserables.json\", {\n    crossOrigin: null\n  }).then(function (json) {\n    var linkForce = d3.forceLink().id(function (link) {\n      return link.id;\n    }).strength(function (link) {\n      return link.value / 10;\n    });\n    var simulation = d3.forceSimulation().force('link', linkForce).force('charge', d3.forceManyBody().strength(-20)).force('center', d3.forceCenter(width / 2, height / 2));\n    var dragDrop = d3.drag().on('start', function (node) {\n      node.fx = node.x;\n      node.fy = node.y;\n    }).on('drag', function (node) {\n      simulation.alphaTarget(0.7).restart();\n      node.fx = d3.event.x;\n      node.fy = d3.event.y;\n    }).on('end', function (node) {\n      if (!d3.event.active) {\n        simulation.alphaTarget(0);\n      }\n\n      node.fx = null;\n      node.fy = null;\n    });\n    var nodeElements = svg.append(\"g\").attr(\"class\", \"nodes\").selectAll(\"circle\").data(json.nodes).enter().append(\"circle\").attr(\"r\", 10).attr(\"fill\", \"#3f51b5\");\n    var textElements = svg.append(\"g\").attr(\"class\", \"texts\").selectAll(\"text\").data(json.nodes).enter().append(\"text\").text(function (node) {\n      return node.id;\n    }).attr(\"font-size\", 15).attr(\"dx\", 15).attr(\"dy\", 4);\n    var linkElements = svg.append(\"g\").attr(\"class\", \"links\").selectAll(\"line\").data(json.links).enter().append(\"line\").attr(\"stroke-width\", 5).attr(\"stroke\", \"gray\");\n    simulation.nodes(json.nodes).on('tick', () => {\n      nodeElements.attr('cx', function (node) {\n        return node.x;\n      }).attr('cy', function (node) {\n        return node.y;\n      });\n      textElements.attr('x', function (node) {\n        return node.x;\n      }).attr('y', function (node) {\n        return node.y;\n      });\n      linkElements.attr('x1', function (link) {\n        return link.source.x;\n      }).attr('y1', function (link) {\n        return link.source.y;\n      }).attr('x2', function (link) {\n        return link.target.x;\n      }).attr('y2', function (link) {\n        return link.target.y;\n      });\n    });\n    console.log(json);\n  });\n};\n\nexport default DrawGrapho2;","map":{"version":3,"sources":["/home/fabian/Documents/d3Js/networks/network-react/chart-d3js-react/src/drawGrapho2.js"],"names":["React","useEffect","d3","width","height","DrawGrapho2","props","select","remove","draw","getNeighbors","node","links","reduce","neighbors","link","target","id","push","source","isNeighborLink","getNodeColor","Array","isArray","indexOf","level","getLinkColor","getTextColor","svg","append","attr","json","crossOrigin","then","linkForce","forceLink","strength","value","simulation","forceSimulation","force","forceManyBody","forceCenter","dragDrop","drag","on","fx","x","fy","y","alphaTarget","restart","event","active","nodeElements","selectAll","data","nodes","enter","textElements","text","linkElements","console","log"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport * as d3 from 'd3';\n\nconst width = 600 //Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\nconst height = 500 //Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\nconst DrawGrapho2 = (props) => {\n  useEffect(() => {\n   d3.select('.drawGrapho2 > *').remove();\n   draw(props)\n },[props])\n  return <div className=\"drawGrapho2\" />\n}\n\nconst draw = (props) => {\n\n  function getNeighbors(node) {\n    return links.reduce(function (neighbors, link) {\n        if (link.target.id === node.id) {\n          neighbors.push(link.source.id)\n        } else if (link.source.id === node.id) {\n          neighbors.push(link.target.id)\n        }\n        return neighbors\n      },\n      [node.id]\n    )\n  }\n\n  function isNeighborLink(node, link) {\n    return link.target.id === node.id || link.source.id === node.id\n  }\n\n\n  function getNodeColor(node, neighbors) {\n    if (Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1) {\n      return node.level === 1 ? 'blue' : 'green'\n    }\n\n    return node.level === 1 ? 'red' : 'gray'\n  }\n\n\n  function getLinkColor(node, link) {\n    return isNeighborLink(node, link) ? 'green' : '#E5E5E5'\n  }\n\n  function getTextColor(node, neighbors) {\n    return Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1 ? 'green' : 'black'\n  }\n\n  var svg = d3.select(\".drawGrapho2\").append(\"svg\")\n  .attr(\"width\", width)\n  .attr(\"height\", height);\n\n  // simulation setup with all forces\n\n  d3.json(\"https://raw.githubusercontent.com/cFabianR/Prubas/master/miserables.json\", {crossOrigin: null}).then(function(json) {\n\n    var linkForce = d3\n      .forceLink()\n      .id(function (link) { return link.id })\n      .strength(function (link) {return link.value/10})\n\n    var simulation = d3\n      .forceSimulation()\n      .force('link', linkForce)\n      .force('charge', d3.forceManyBody().strength(-20))\n      .force('center', d3.forceCenter(width / 2, height / 2))\n\n      var dragDrop = d3.drag().on('start', function (node) {\n        node.fx = node.x\n        node.fy = node.y\n      }).on('drag', function (node) {\n        simulation.alphaTarget(0.7).restart()\n        node.fx = d3.event.x\n        node.fy = d3.event.y\n      }).on('end', function (node) {\n        if (!d3.event.active) {\n          simulation.alphaTarget(0)\n        }\n        node.fx = null\n        node.fy = null\n      })\n      \n    var nodeElements = svg.append(\"g\")\n      .attr(\"class\", \"nodes\")\n      .selectAll(\"circle\")\n      .data(json.nodes)\n      .enter().append(\"circle\")\n      .attr(\"r\", 10)\n      .attr(\"fill\", \"#3f51b5\")\n\n    var textElements = svg.append(\"g\")\n      .attr(\"class\", \"texts\")\n      .selectAll(\"text\")\n      .data(json.nodes)\n      .enter().append(\"text\")\n      .text(function (node) { return  node.id})\n  \t  .attr(\"font-size\", 15)\n  \t  .attr(\"dx\", 15)\n      .attr(\"dy\", 4)\n\n    var linkElements = svg.append(\"g\")\n      .attr(\"class\", \"links\")\n      .selectAll(\"line\")\n      .data(json.links)\n      .enter().append(\"line\")\n        .attr(\"stroke-width\", 5)\n    \t  .attr(\"stroke\", \"gray\")\n\n    simulation.nodes(json.nodes).on('tick', () => {\n      nodeElements\n        .attr('cx', function (node) { return node.x })\n        .attr('cy', function (node) { return node.y })\n      textElements\n        .attr('x', function (node) { return node.x })\n        .attr('y', function (node) { return node.y })\n      linkElements\n        .attr('x1', function (link) { return link.source.x })\n        .attr('y1', function (link) { return link.source.y })\n        .attr('x2', function (link) { return link.target.x })\n        .attr('y2', function (link) { return link.target.y })\n    })\n\n\n\n  console.log(json);\n  });\n\n\n\n}\nexport default DrawGrapho2\n"]},"metadata":{},"sourceType":"module"}