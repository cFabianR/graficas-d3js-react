{"ast":null,"code":"var _jsxFileName = \"/home/fabian/Documents/d3Js/networks/network-react/chart-d3js-react/src/drawGrapho2.js\";\nimport React, { useEffect } from 'react';\nimport * as d3 from 'd3';\nconst width = 600; //Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n\nconst height = 500; //Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\nconst DrawGrapho2 = props => {\n  useEffect(() => {\n    d3.select('.drawGrapho2 > *').remove();\n    draw(props);\n  }, [props]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"drawGrapho2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 10\n    }\n  });\n};\n\nconst draw = props => {\n  function isNeighborLink(node, link) {\n    return link.target.id === node.id || link.source.id === node.id;\n  }\n\n  function getNodeColor(node, neighbors) {\n    if (Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1) {\n      return node.level === 1 ? 'blue' : 'green';\n    }\n\n    return node.level === 1 ? 'red' : 'gray';\n  }\n\n  function getLinkColor(node, link) {\n    return isNeighborLink(node, link) ? 'green' : '#E5E5E5';\n  }\n\n  function getTextColor(node, neighbors) {\n    return Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1 ? 'green' : 'black';\n  }\n\n  var svg = d3.select(\".drawGrapho2\").append(\"svg\").attr(\"width\", width).attr(\"height\", height); // simulation setup with all forces\n\n  d3.json(\"https://raw.githubusercontent.com/cFabianR/Prubas/master/miserables.json\", {\n    crossOrigin: null\n  }).then(function (json) {\n    function getNeighbors(node) {\n      return json.links.reduce(function (neighbors, link) {\n        if (link.target.id === node.id) {\n          neighbors.push(link.source.id);\n        } else if (link.source.id === node.id) {\n          neighbors.push(link.target.id);\n        }\n\n        return neighbors;\n      }, [node.id]);\n    }\n\n    var linkForce = d3.forceLink().id(function (link) {\n      return link.id;\n    }).strength(function (link) {\n      return link.value / 100;\n    });\n    var simulation = d3.forceSimulation().force('link', linkForce).force('charge', d3.forceManyBody().strength(-20)).force('center', d3.forceCenter(width / 2, height / 2));\n    var dragDrop = d3.drag().on('start', function (node) {\n      node.fx = node.x;\n      node.fy = node.y;\n    }).on('drag', function (node) {\n      simulation.alphaTarget(0.7).restart();\n      node.fx = d3.event.x;\n      node.fy = d3.event.y;\n    }).on('end', function (node) {\n      if (!d3.event.active) {\n        simulation.alphaTarget(0);\n      }\n\n      node.fx = null;\n      node.fy = null;\n    });\n\n    function selectNode(selectedNode) {\n      var neighbors = getNeighbors(selectedNode); // we modify the styles to highlight selected nodes\n\n      nodeElements.attr('fill', function (node) {\n        return getNodeColor(node, neighbors);\n      });\n      textElements.attr('fill', function (node) {\n        return getTextColor(node, neighbors);\n      });\n      linkElements.attr('stroke', function (link) {\n        return getLinkColor(selectedNode, link);\n      });\n    }\n\n    var linkElements = svg.append(\"g\").attr(\"class\", \"links\").selectAll(\"line\").data(json.links).enter().append(\"line\").attr(\"stroke-width\", 1).attr(\"stroke\", \"gray\");\n    var nodeElements = svg.append(\"g\").attr(\"class\", \"nodes\").selectAll(\"circle\").data(json.nodes).enter().append(\"circle\").attr(\"r\", 10).attr(\"fill\", \"#3f51b5\").call(dragDrop).on('click', selectNode);\n    var textElements = svg.append(\"g\").attr(\"class\", \"texts\").selectAll(\"text\").data(json.nodes).enter().append(\"text\").text(function (node) {\n      return node.id;\n    }).attr(\"font-size\", 15).attr(\"dx\", 15).attr(\"dy\", 4);\n    simulation.nodes(json.nodes).on('tick', () => {\n      nodeElements.attr('cx', function (node) {\n        return node.x;\n      }).attr('cy', function (node) {\n        return node.y;\n      });\n      textElements.attr('x', function (node) {\n        return node.x;\n      }).attr('y', function (node) {\n        return node.y;\n      });\n      linkElements.attr('x1', function (link) {\n        return link.source.x;\n      }).attr('y1', function (link) {\n        return link.source.y;\n      }).attr('x2', function (link) {\n        return link.target.x;\n      }).attr('y2', function (link) {\n        return link.target.y;\n      });\n    });\n    simulation.force(\"link\").links(json.links);\n    console.log(json);\n  });\n};\n\nexport default DrawGrapho2;","map":{"version":3,"sources":["/home/fabian/Documents/d3Js/networks/network-react/chart-d3js-react/src/drawGrapho2.js"],"names":["React","useEffect","d3","width","height","DrawGrapho2","props","select","remove","draw","isNeighborLink","node","link","target","id","source","getNodeColor","neighbors","Array","isArray","indexOf","level","getLinkColor","getTextColor","svg","append","attr","json","crossOrigin","then","getNeighbors","links","reduce","push","linkForce","forceLink","strength","value","simulation","forceSimulation","force","forceManyBody","forceCenter","dragDrop","drag","on","fx","x","fy","y","alphaTarget","restart","event","active","selectNode","selectedNode","nodeElements","textElements","linkElements","selectAll","data","enter","nodes","call","text","console","log"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport * as d3 from 'd3';\n\nconst width = 600 //Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\nconst height = 500 //Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\nconst DrawGrapho2 = (props) => {\n  useEffect(() => {\n   d3.select('.drawGrapho2 > *').remove();\n   draw(props)\n },[props])\n  return <div className=\"drawGrapho2\" />\n}\n\nconst draw = (props) => {\n\n\n\n  function isNeighborLink(node, link) {\n    return link.target.id === node.id || link.source.id === node.id\n  }\n\n\n  function getNodeColor(node, neighbors) {\n    if (Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1) {\n      return node.level === 1 ? 'blue' : 'green'\n    }\n\n    return node.level === 1 ? 'red' : 'gray'\n  }\n\n\n  function getLinkColor(node, link) {\n    return isNeighborLink(node, link) ? 'green' : '#E5E5E5'\n  }\n\n  function getTextColor(node, neighbors) {\n    return Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1 ? 'green' : 'black'\n  }\n\n  var svg = d3.select(\".drawGrapho2\").append(\"svg\")\n  .attr(\"width\", width)\n  .attr(\"height\", height);\n\n  // simulation setup with all forces\n\n  d3.json(\"https://raw.githubusercontent.com/cFabianR/Prubas/master/miserables.json\", {crossOrigin: null}).then(function(json) {\n\n    function getNeighbors(node) {\n      return json.links.reduce(function (neighbors, link) {\n          if (link.target.id === node.id) {\n            neighbors.push(link.source.id)\n          } else if (link.source.id === node.id) {\n            neighbors.push(link.target.id)\n          }\n          return neighbors\n        },\n        [node.id]\n      )\n    }\n\n    var linkForce = d3\n      .forceLink()\n      .id(function (link) { return link.id })\n      .strength(function (link) {return link.value/100})\n\n    var simulation = d3\n      .forceSimulation()\n      .force('link', linkForce)\n      .force('charge', d3.forceManyBody().strength(-20))\n      .force('center', d3.forceCenter(width / 2, height / 2))\n\n      var dragDrop = d3.drag().on('start', function (node) {\n        node.fx = node.x\n        node.fy = node.y\n      }).on('drag', function (node) {\n        simulation.alphaTarget(0.7).restart()\n        node.fx = d3.event.x\n        node.fy = d3.event.y\n      }).on('end', function (node) {\n        if (!d3.event.active) {\n          simulation.alphaTarget(0)\n        }\n        node.fx = null\n        node.fy = null\n      })\n\n    function selectNode(selectedNode) {\n      var neighbors = getNeighbors(selectedNode)\n\n      // we modify the styles to highlight selected nodes\n      nodeElements.attr('fill', function (node) { return getNodeColor(node, neighbors) })\n      textElements.attr('fill', function (node) { return getTextColor(node, neighbors) })\n      linkElements.attr('stroke', function (link) { return getLinkColor(selectedNode, link) })\n    }\n\n    var linkElements = svg.append(\"g\")\n      .attr(\"class\", \"links\")\n      .selectAll(\"line\")\n      .data(json.links)\n      .enter().append(\"line\")\n        .attr(\"stroke-width\", 1)\n    \t  .attr(\"stroke\", \"gray\")\n        \n    var nodeElements = svg.append(\"g\")\n      .attr(\"class\", \"nodes\")\n      .selectAll(\"circle\")\n      .data(json.nodes)\n      .enter().append(\"circle\")\n        .attr(\"r\", 10)\n        .attr(\"fill\", \"#3f51b5\")\n        .call(dragDrop)\n        .on('click', selectNode)\n\n    var textElements = svg.append(\"g\")\n      .attr(\"class\", \"texts\")\n      .selectAll(\"text\")\n      .data(json.nodes)\n      .enter().append(\"text\")\n        .text(function (node) { return  node.id})\n  \t      .attr(\"font-size\", 15)\n  \t      .attr(\"dx\", 15)\n          .attr(\"dy\", 4)\n\n\n    simulation.nodes(json.nodes).on('tick', () => {\n      nodeElements\n        .attr('cx', function (node) { return node.x })\n        .attr('cy', function (node) { return node.y })\n      textElements\n        .attr('x', function (node) { return node.x })\n        .attr('y', function (node) { return node.y })\n      linkElements\n        .attr('x1', function (link) { return link.source.x })\n        .attr('y1', function (link) { return link.source.y })\n        .attr('x2', function (link) { return link.target.x })\n        .attr('y2', function (link) { return link.target.y })\n    })\n\n    simulation.force(\"link\").links(json.links)\n\n  console.log(json);\n  });\n\n\n\n}\nexport default DrawGrapho2\n"]},"metadata":{},"sourceType":"module"}