{"ast":null,"code":"import React,{useEffect}from'react';import*as d3 from'd3';var styleDefs=require(\"./bar.scss\");var width=600;//Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\nvar height=500;//Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\nvar BarChart=function BarChart(props){useEffect(function(){d3.select('.barChart > *').remove();draw(props);},[props]);return/*#__PURE__*/React.createElement(\"div\",{className:\"barChart\"});};var xScale=d3.scaleBand().range([0,3*width/4]).padding(0.1),yScale=d3.scaleLinear().range([3*height/4,0]);var draw=function draw(props){d3.csv(props.data,function(d){return{valueX:d[props.headerX],valueY:d[props.headerY]};}).then(function(data){var margin=50;var svgBars=d3.select('.barChart').append('svg').attr(\"width\",width-margin).attr(\"height\",height-margin);var gBar2=svgBars.append(\"g\").attr(\"transform\",\"translate(\"+50+\",\"+30+\")\");xScale.domain(data.map(function(d){return d.valueX;}));yScale.domain([0,d3.max(data,function(d){return d.valueY;})]);var x_axis=d3.axisBottom().scale(xScale);var y_axis=d3.axisLeft().scale(yScale);gBar2.append(\"g\").call(y_axis).append(\"text\").attr(\"transform\",\"rotate(-90)\").attr(\"y\",15).attr(\"dy\",\"-5.1em\").attr(\"text-anchor\",\"end\").attr(\"stroke\",\"black\").text(props.headerY);var xAxisTranslate=3*height/4;gBar2.append(\"g\").attr(\"transform\",\"translate(0, \"+xAxisTranslate+\")\").call(x_axis).append(\"text\").attr(\"y\",30).attr(\"x\",3*width/4).attr(\"stroke\",\"black\").text(props.headerX);gBar2.selectAll(\".bar\").attr(\"transform\",\"translate(0, \"+xAxisTranslate+\")\").data(data).enter().append(\"rect\").attr(\"class\",\"bar\").attr(\"x\",function(d){return xScale(d.valueX);}).attr(\"y\",function(d){return yScale(d.valueY);}).attr(\"width\",xScale.bandwidth()).attr(\"height\",function(d){return xAxisTranslate-yScale(d.valueY);}).attr(\"fill\",styleDefs.primaryColor).on(\"mouseover\",handleMouseOver).on(\"mouseout\",handleMouseOut).transition().ease(d3.easeLinear).duration(400).delay(function(d,i){return i*50;});});};function handleMouseOver(d,i){d3.select(this).attr(\"fill\",styleDefs.contrastColor);d3.select(this).transition().duration(400).attr('width',xScale.bandwidth()+5).attr(\"y\",function(d){return yScale(d.valueY)-5;}).attr(\"x\",function(d){return xScale(d.valueX)-2.5;}).attr(\"height\",function(d){return 3*height/4+5-yScale(d.valueY);});console.log(draw.gBar2);d3.select(this.parentNode).append(\"text\").attr('class','val').attr(\"x\",function(){return xScale(d.valueX);}).attr(\"y\",function(){return yScale(d.valueY)-15;}).text(function(){return['$'+d.valueY];// Value of the text\n});}function handleMouseOut(d,i){d3.select(this).attr(\"fill\",styleDefs.primaryColor);d3.select(this).transition().duration(400).attr('width',xScale.bandwidth()).attr(\"y\",function(d){return yScale(d.valueY);}).attr(\"x\",function(d){return xScale(d.valueX);}).attr(\"height\",function(d){return 3*height/4-yScale(d.valueY);});d3.selectAll('.val').remove();}export default BarChart;","map":{"version":3,"sources":["/home/fabian/Documents/d3Js/networks/network-react/chart-d3js-react/src/bars.js"],"names":["React","useEffect","d3","styleDefs","require","width","height","BarChart","props","select","remove","draw","xScale","scaleBand","range","padding","yScale","scaleLinear","csv","data","d","valueX","headerX","valueY","headerY","then","margin","svgBars","append","attr","gBar2","domain","map","max","x_axis","axisBottom","scale","y_axis","axisLeft","call","text","xAxisTranslate","selectAll","enter","bandwidth","primaryColor","on","handleMouseOver","handleMouseOut","transition","ease","easeLinear","duration","delay","i","contrastColor","console","log","parentNode"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport * as d3 from 'd3';\n\nconst styleDefs = require(\"./bar.scss\");\n\n\nconst width = 600 //Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\nconst height = 500 //Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\nconst BarChart = (props) => {\n  useEffect(() => {\n   d3.select('.barChart > *').remove();\n   draw(props)\n },[props])\n  return <div className=\"barChart\" />\n}\n\nvar xScale = d3.scaleBand().range([0, 3*width/4]).padding(0.1),\n    yScale = d3.scaleLinear().range([3*height/4, 0]);\n\nconst draw = (props) => {\n\n    d3.csv( props.data , function(d) {\n      return {\n        valueX : d[props.headerX],\n        valueY : d[props.headerY],\n        };\n      }).then(function(data) {\n\n    const margin = 50\n    var  svgBars = d3.select('.barChart').append('svg')\n          .attr(\"width\", width - margin)\n          .attr(\"height\", height - margin);\n    var gBar2 = svgBars.append(\"g\")\n          .attr(\"transform\", \"translate(\" + 50 + \",\" +30 + \")\")\n\n    xScale.domain(data.map(function(d) { return d.valueX; }))\n    yScale.domain([0, d3.max(data, function(d) { return d.valueY; })])\n\n    var x_axis = d3.axisBottom()\n          .scale(xScale);\n\n    var y_axis = d3.axisLeft()\n          .scale(yScale);\n\n    gBar2.append(\"g\")\n       .call(y_axis)\n       .append(\"text\")\n       .attr(\"transform\", \"rotate(-90)\")\n       .attr(\"y\",15)\n       .attr(\"dy\", \"-5.1em\")\n       .attr(\"text-anchor\", \"end\")\n       .attr(\"stroke\", \"black\")\n       .text(props.headerY);\n\n\n    var xAxisTranslate = 3*height/4 ;\n\n    gBar2.append(\"g\")\n        .attr(\"transform\", \"translate(0, \" +  xAxisTranslate +\")\")\n        .call(x_axis)\n        .append(\"text\")\n        .attr(\"y\",30)\n        .attr(\"x\",3*width/4)\n        .attr(\"stroke\", \"black\")\n        .text(props.headerX);\n\n    gBar2.selectAll(\".bar\")\n        .attr(\"transform\", \"translate(0, \" + xAxisTranslate  +\")\")\n        .data(data)\n        .enter().append(\"rect\")\n        .attr(\"class\", \"bar\")\n        .attr(\"x\", function(d) { return xScale(d.valueX); })\n        .attr(\"y\", function(d) { return yScale(d.valueY); })\n        .attr(\"width\", xScale.bandwidth())\n        .attr(\"height\",function(d) { return xAxisTranslate  - yScale(d.valueY); })\n        .attr(\"fill\", styleDefs.primaryColor)\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut)\n        .transition()\n         .ease(d3.easeLinear)\n         .duration(400)\n         .delay(function (d, i) {\n             return i * 50;\n         })\n        });\n  }\n\n  function handleMouseOver(d, i) {\n    d3.select(this).attr(\"fill\", styleDefs.contrastColor)\n    d3.select(this).transition()\n      .duration(400)\n      .attr('width', xScale.bandwidth() + 5)\n      .attr(\"y\", function(d) { return yScale(d.valueY)-5; })\n      .attr(\"x\", function(d) { return xScale(d.valueX)-2.5; })\n      .attr(\"height\", function(d) { return 3*height/4 + 5 - yScale(d.valueY); });\n\n\n    console.log(draw.gBar2)\n    d3.select(this.parentNode).append(\"text\")\n      .attr('class', 'val')\n      .attr(\"x\", function() { return  xScale(d.valueX);})\n      .attr(\"y\", function() { return yScale(d.valueY) -15 ; })\n      .text(function() {\n        return [ '$' +d.valueY];  // Value of the text\n    });\n  }\n\n  function handleMouseOut(d, i) {\n    d3.select(this).attr(\"fill\", styleDefs.primaryColor);\n    d3.select(this).transition()\n      .duration(400)\n      .attr('width', xScale.bandwidth())\n      .attr(\"y\", function(d) { return yScale(d.valueY); })\n      .attr(\"x\", function(d) { return xScale(d.valueX); })\n      .attr(\"height\", function(d) { return 3*height/4 - yScale(d.valueY); });\n\n    d3.selectAll('.val')\n        .remove()\n  }\nexport default BarChart\n"]},"metadata":{},"sourceType":"module"}