{"ast":null,"code":"var _jsxFileName = \"/home/fabian/Documents/d3Js/networks/network-react/chart-d3js-react/src/bars.js\";\nimport React, { useEffect } from 'react';\nimport * as d3 from 'd3';\n\nconst styleDefs = require(\"./bar.scss\");\n\nconst width = 600; //Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n\nconst height = 500; //Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\nconst BarChart = props => {\n  useEffect(() => {\n    d3.select('.barChart > *').remove();\n    draw(props);\n  }, [props]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"barChart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 10\n    }\n  });\n};\n\nvar xScale = d3.scaleBand().range([0, 3 * width / 4]).padding(0.1),\n    yScale = d3.scaleLinear().range([3 * height / 4, 0]);\n\nconst draw = props => {\n  d3.csv(props.data, function (d) {\n    return {\n      valueX: d[props.headerX],\n      valueY: d[props.headerY]\n    };\n  }).then(function (data) {\n    const margin = 50;\n    var svgBars = d3.select('.barChart').append('svg').attr(\"width\", width - margin).attr(\"height\", height - margin);\n    var gBar2 = svgBars.append(\"g\").attr(\"transform\", \"translate(\" + 50 + \",\" + 30 + \")\");\n    xScale.domain(data.map(function (d) {\n      return d.valueX;\n    }));\n    yScale.domain([0, d3.max(data, function (d) {\n      return d.valueY;\n    })]);\n    var x_axis = d3.axisBottom().scale(xScale);\n    var y_axis = d3.axisLeft().scale(yScale);\n    gBar2.append(\"g\").call(y_axis).append(\"text\").attr(\"transform\", \"rotate(-90)\").attr(\"y\", 15).attr(\"dy\", \"-5.1em\").attr(\"text-anchor\", \"end\").attr(\"stroke\", \"black\").text(props.headerY);\n    var xAxisTranslate = 3 * height / 4;\n    gBar2.append(\"g\").attr(\"transform\", \"translate(0, \" + xAxisTranslate + \")\").call(x_axis).append(\"text\").attr(\"y\", 30).attr(\"x\", 3 * width / 4).attr(\"stroke\", \"black\").text(props.headerX);\n    gBar2.selectAll(\".bar\").attr(\"transform\", \"translate(0, \" + xAxisTranslate + \")\").data(data).enter().append(\"rect\").attr(\"class\", \"bar\").attr(\"x\", function (d) {\n      return xScale(d.valueX);\n    }).attr(\"y\", function (d) {\n      return yScale(d.valueY);\n    }).attr(\"width\", xScale.bandwidth()).attr(\"height\", function (d) {\n      return xAxisTranslate - yScale(d.valueY);\n    }).attr(\"fill\", styleDefs.primaryColor).on(\"mouseover\", handleMouseOver).on(\"mouseout\", handleMouseOut).transition().ease(d3.easeLinear).duration(400).delay(function (d, i) {\n      return i * 50;\n    });\n  });\n};\n\nfunction handleMouseOver(d, i) {\n  d3.select(this).attr(\"fill\", styleDefs.contrastColor);\n  d3.select(this).transition().duration(400).attr('width', xScale.bandwidth() + 5).attr(\"y\", function (d) {\n    return yScale(d.valueY) - 5;\n  }).attr(\"x\", function (d) {\n    return xScale(d.valueX) - 2.5;\n  }).attr(\"height\", function (d) {\n    return 3 * height / 4 + 5 - yScale(d.valueY);\n  });\n  d3.select(this.parentNode).append(\"text\").attr('class', 'val').attr(\"x\", function () {\n    return xScale(d.valueX);\n  }).attr(\"y\", function () {\n    return yScale(d.valueY) - 15;\n  }).text(function () {\n    return ['$' + d.valueY]; // Value of the text\n  });\n}\n\nfunction handleMouseOut(d, i) {\n  d3.select(this).attr(\"fill\", styleDefs.primaryColor);\n  d3.select(this).transition().duration(400).attr('width', xScale.bandwidth()).attr(\"y\", function (d) {\n    return yScale(d.valueY);\n  }).attr(\"x\", function (d) {\n    return xScale(d.valueX);\n  }).attr(\"height\", function (d) {\n    return 3 * height / 4 - yScale(d.valueY);\n  });\n  d3.selectAll('.val').remove();\n}\n\nexport default BarChart;","map":{"version":3,"sources":["/home/fabian/Documents/d3Js/networks/network-react/chart-d3js-react/src/bars.js"],"names":["React","useEffect","d3","styleDefs","require","width","height","BarChart","props","select","remove","draw","xScale","scaleBand","range","padding","yScale","scaleLinear","csv","data","d","valueX","headerX","valueY","headerY","then","margin","svgBars","append","attr","gBar2","domain","map","max","x_axis","axisBottom","scale","y_axis","axisLeft","call","text","xAxisTranslate","selectAll","enter","bandwidth","primaryColor","on","handleMouseOver","handleMouseOut","transition","ease","easeLinear","duration","delay","i","contrastColor","parentNode"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport * as d3 from 'd3';\n\nconst styleDefs = require(\"./bar.scss\");\n\n\nconst width = 600 //Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\nconst height = 500 //Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\nconst BarChart = (props) => {\n  useEffect(() => {\n   d3.select('.barChart > *').remove();\n   draw(props)\n },[props])\n  return <div className=\"barChart\" />\n}\n\nvar xScale = d3.scaleBand().range([0, 3*width/4]).padding(0.1),\n    yScale = d3.scaleLinear().range([3*height/4, 0]);\n\nconst draw = (props) => {\n\n    d3.csv( props.data , function(d) {\n      return {\n        valueX : d[props.headerX],\n        valueY : d[props.headerY],\n        };\n      }).then(function(data) {\n\n    const margin = 50\n    var  svgBars = d3.select('.barChart').append('svg')\n          .attr(\"width\", width - margin)\n          .attr(\"height\", height - margin);\n    var gBar2 = svgBars.append(\"g\")\n          .attr(\"transform\", \"translate(\" + 50 + \",\" +30 + \")\")\n\n    xScale.domain(data.map(function(d) { return d.valueX; }))\n    yScale.domain([0, d3.max(data, function(d) { return d.valueY; })])\n\n    var x_axis = d3.axisBottom()\n          .scale(xScale);\n\n    var y_axis = d3.axisLeft()\n          .scale(yScale);\n\n    gBar2.append(\"g\")\n       .call(y_axis)\n       .append(\"text\")\n       .attr(\"transform\", \"rotate(-90)\")\n       .attr(\"y\",15)\n       .attr(\"dy\", \"-5.1em\")\n       .attr(\"text-anchor\", \"end\")\n       .attr(\"stroke\", \"black\")\n       .text(props.headerY);\n\n\n    var xAxisTranslate = 3*height/4 ;\n\n    gBar2.append(\"g\")\n        .attr(\"transform\", \"translate(0, \" +  xAxisTranslate +\")\")\n        .call(x_axis)\n        .append(\"text\")\n        .attr(\"y\",30)\n        .attr(\"x\",3*width/4)\n        .attr(\"stroke\", \"black\")\n        .text(props.headerX);\n\n    gBar2.selectAll(\".bar\")\n        .attr(\"transform\", \"translate(0, \" + xAxisTranslate  +\")\")\n        .data(data)\n        .enter().append(\"rect\")\n        .attr(\"class\", \"bar\")\n        .attr(\"x\", function(d) { return xScale(d.valueX); })\n        .attr(\"y\", function(d) { return yScale(d.valueY); })\n        .attr(\"width\", xScale.bandwidth())\n        .attr(\"height\",function(d) { return xAxisTranslate  - yScale(d.valueY); })\n        .attr(\"fill\", styleDefs.primaryColor)\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut)\n        .transition()\n         .ease(d3.easeLinear)\n         .duration(400)\n         .delay(function (d, i) {\n             return i * 50;\n         })\n        });\n  }\n\n  function handleMouseOver(d, i) {\n    d3.select(this).attr(\"fill\", styleDefs.contrastColor)\n    d3.select(this).transition()\n      .duration(400)\n      .attr('width', xScale.bandwidth() + 5)\n      .attr(\"y\", function(d) { return yScale(d.valueY)-5; })\n      .attr(\"x\", function(d) { return xScale(d.valueX)-2.5; })\n      .attr(\"height\", function(d) { return 3*height/4 + 5 - yScale(d.valueY); });\n\n\n\n    d3.select(this.parentNode).append(\"text\")\n      .attr('class', 'val')\n      .attr(\"x\", function() { return  xScale(d.valueX);})\n      .attr(\"y\", function() { return yScale(d.valueY) -15 ; })\n      .text(function() {\n        return [ '$' +d.valueY];  // Value of the text\n    });\n  }\n\n  function handleMouseOut(d, i) {\n    d3.select(this).attr(\"fill\", styleDefs.primaryColor);\n    d3.select(this).transition()\n      .duration(400)\n      .attr('width', xScale.bandwidth())\n      .attr(\"y\", function(d) { return yScale(d.valueY); })\n      .attr(\"x\", function(d) { return xScale(d.valueX); })\n      .attr(\"height\", function(d) { return 3*height/4 - yScale(d.valueY); });\n\n    d3.selectAll('.val')\n        .remove()\n  }\nexport default BarChart\n"]},"metadata":{},"sourceType":"module"}